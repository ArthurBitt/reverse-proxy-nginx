name: ðŸš€ Dispatch-versioning

on:
  pull_request:
    types: [closed]
    branches:
      - staging
      - main

jobs:
  dispatch-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸš€ Disparar Workflow no RepositÃ³rio de CI/CD
        uses: peter-evans/repository-dispatch@v2
        with:
          token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
          repository: ArthurBitt/ci-cd-versioning
          event-type: versioning-event
          client-payload: |
            {
              "pr_number": ${{ github.event.pull_request.number }},
              "head_ref": "${{ github.head_ref }}",
              "base_ref": "${{ github.base_ref }}",
              "repo": "${{ github.repository }}"
            }
